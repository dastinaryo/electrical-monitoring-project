<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href={{ url_for('static', filename="/assets/img/apple-icon.png") }}>
  <link rel="icon" type="image/png" href={{ url_for('static', filename="/assets/img/favicon.png") }}>
  <title>
    AFET | Automatic Filler Electricity Token 
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <link href={{ url_for('static', filename="/assets/css/nucleo-icons.css") }} rel="stylesheet" />
  <link href={{ url_for('static', filename="/assets/css/nucleo-svg.css") }} rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link href={{ url_for('static', filename="/assets/css/nucleo-svg.css") }} rel="stylesheet" />
  <!-- CSS Files -->
  <link id="pagestyle" href={{ url_for('static', filename="/assets/css/argon-dashboard.css") }} rel="stylesheet" />

  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

  <script src={{ url_for('static', filename='/assets/js/firebase-config.js') }}></script>

</head>

<body class="g-sidenav-show   bg-gray-100">
  <div class="min-height-300 bg-primary position-absolute w-100"></div>
  <aside class="sidenav bg-white navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-4 " id="sidenav-main">
    <div class="sidenav-header">
      <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
      <a class="navbar-brand m-0" href=" https://demos.creative-tim.com/argon-dashboard/pages/dashboard.html " target="_blank">
        <img src={{ url_for('static', filename="/assets/img/logo-ct-dark.png") }} class="navbar-brand-img h-100" alt="main_logo">
        <span class="ms-1 font-weight-bold">Afet Dashboard</span>
      </a>
    </div>
    <hr class="horizontal dark mt-0">
    <div class="collapse navbar-collapse  w-auto " id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link active" href="{{ url_for('beranda') }}">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-tv-2 text-primary text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="{{ url_for('fuzzy_analisis') }}">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-calendar-grid-58 text-warning text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Fuzzy Analysis Energy</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="{{ url_for('ai_tools') }}">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-credit-card text-success text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">AI Tools </span>
          </a>
        </li>
      </ul>
    </div>
    <div class="sidenav-footer mx-3 ">
      <div class="card card-plain shadow-none" id="sidenavCard">
        <img class="w-50 mx-auto" src={{ url_for('static', filename="/assets/img/illustrations/icon-documentation.svg") }} alt="sidebar_illustration">
        <div class="card-body text-center p-3 w-100 pt-0">
          <div class="docs-info">
            <h6 class="mb-0">Need help?</h6>
            <p class="text-xs font-weight-bold mb-0">Please check our docs</p>
          </div>
        </div>
      </div>
      <a href="https://tekkom.upi.edu/" target="_blank" class="btn btn-dark btn-sm w-100 mb-3">Contact Us</a>
      <a class="btn btn-primary btn-sm mb-0 w-100" href="#" type="button">Upgrade to pro</a>
    </div>
  </aside>
  <main class="main-content position-relative border-radius-lg ">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl " id="navbarBlur" data-scroll="false">
      <div class="container-fluid py-1 px-3">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5">
            <li class="breadcrumb-item text-sm"><a class="opacity-5 text-white" href="javascript:;">Pages</a></li>
            <li class="breadcrumb-item text-sm text-white active" aria-current="page">Dashboard</li>
          </ol>
          <h6 class="font-weight-bolder text-white mb-0" data-firebase="check-device"></h6> <!-- Device Disconnect -->
        </nav>
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          <div class="ms-md-auto pe-md-3 d-flex align-items-center">
            <div class="input-group">
              <span class="input-group-text text-body"><i class="fas fa-search" aria-hidden="true"></i></span>
              <input type="text" class="form-control" placeholder="Type here...">
            </div>
          </div>
          <ul class="navbar-nav  justify-content-end">
            <!-- <li class="nav-item d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-white font-weight-bold px-0">
                <i class="fa fa-user me-sm-1"></i>
                <span class="d-sm-inline d-none">Sign In</span>
              </a>
            </li> -->
            <li class="nav-item d-xl-none ps-3 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-white p-0" id="iconNavbarSidenav">
                <div class="sidenav-toggler-inner">
                  <i class="sidenav-toggler-line bg-white"></i>
                  <i class="sidenav-toggler-line bg-white"></i>
                  <i class="sidenav-toggler-line bg-white"></i>
                </div>
              </a>
            </li>
            <li class="nav-item px-3 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-white p-0">
                <i class="fa fa-cog fixed-plugin-button-nav cursor-pointer"></i>
              </a>
            </li>
            <li class="nav-item dropdown pe-2 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-white p-0" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fa fa-bell cursor-pointer"></i>
              </a>
              <ul class="dropdown-menu  dropdown-menu-end  px-2 py-3 me-sm-n4" aria-labelledby="dropdownMenuButton">
                <li class="mb-2">
                  <a class="dropdown-item border-radius-md" href="javascript:;">
                    <div class="d-flex py-1">
                      <div class="my-auto">
                        <img src={{ url_for('static', filename="/assets/img/team-2.jpg")}} class="avatar avatar-sm  me-3 ">
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="text-sm font-weight-normal mb-1">
                          <span class="font-weight-bold">New message</span> from Laur
                        </h6>
                        <p class="text-xs text-secondary mb-0">
                          <i class="fa fa-clock me-1"></i>
                          13 minutes ago
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="mb-2">
                  <a class="dropdown-item border-radius-md" href="javascript:;">
                    <div class="d-flex py-1">
                      <div class="my-auto">
                        <img src={{ url_for('static', filename="/assets/img/small-logos/logo-spotify.svg")}} class="avatar avatar-sm bg-gradient-dark  me-3 ">
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="text-sm font-weight-normal mb-1">
                          <span class="font-weight-bold">New album</span> by Travis Scott
                        </h6>
                        <p class="text-xs text-secondary mb-0">
                          <i class="fa fa-clock me-1"></i>
                          1 day
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a class="dropdown-item border-radius-md" href="javascript:;">
                    <div class="d-flex py-1">
                      <div class="avatar avatar-sm bg-gradient-secondary  me-3  my-auto">
                        <svg width="12px" height="12px" viewBox="0 0 43 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                          <title>credit-card</title>
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g transform="translate(-2169.000000, -745.000000)" fill="#FFFFFF" fill-rule="nonzero">
                              <g transform="translate(1716.000000, 291.000000)">
                                <g transform="translate(453.000000, 454.000000)">
                                  <path class="color-background" d="M43,10.7482083 L43,3.58333333 C43,1.60354167 41.3964583,0 39.4166667,0 L3.58333333,0 C1.60354167,0 0,1.60354167 0,3.58333333 L0,10.7482083 L43,10.7482083 Z" opacity="0.593633743"></path>
                                  <path class="color-background" d="M0,16.125 L0,32.25 C0,34.2297917 1.60354167,35.8333333 3.58333333,35.8333333 L39.4166667,35.8333333 C41.3964583,35.8333333 43,34.2297917 43,32.25 L43,16.125 L0,16.125 Z M19.7083333,26.875 L7.16666667,26.875 L7.16666667,23.2916667 L19.7083333,23.2916667 L19.7083333,26.875 Z M35.8333333,26.875 L28.6666667,26.875 L28.6666667,23.2916667 L35.8333333,23.2916667 L35.8333333,26.875 Z"></path>
                                </g>
                              </g>
                            </g>
                          </g>
                        </svg>
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="text-sm font-weight-normal mb-1">
                          Payment successfully completed
                        </h6>
                        <p class="text-xs text-secondary mb-0">
                          <i class="fa fa-clock me-1"></i>
                          2 days
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->
    <div class="container-fluid py-4" >
      <div class="row" style="padding-bottom: 35px;">
        <!-- <form action="/api/fuzzyLogic" method="post"> -->
        <div class="col-xl-12 col-sm-6 mb-xl-0 mb-4">
          <div class="card">
            <div class="card-body p-3">
              <div class="row">
                <div class="col-11">
                  <div class="numbers">
                    <p class="text-sm mb-0 font-weight-bold">Masukan Stroom Token</p>
                    <input type="text" id="stroom_token" name="stroom_token" class="form-control" style="margin-top: 10px;" required>
                  </div>
                </div>
                <div class="col-1" style="padding-top:35px; padding-left: 35px;" onclick="inputToken()">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-send-check" viewBox="0 0 16 16">
                    <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855a.75.75 0 0 0-.124 1.329l4.995 3.178 1.531 2.406a.5.5 0 0 0 .844-.536L6.637 10.07l7.494-7.494-1.895 4.738a.5.5 0 1 0 .928.372l2.8-7Zm-2.54 1.183L5.93 9.363 1.591 6.602l11.833-4.733Z"/>
                    <path d="M16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0m-1.993-1.679a.5.5 0 0 0-.686.172l-1.17 1.95-.547-.547a.5.5 0 0 0-.708.708l.774.773a.75.75 0 0 0 1.174-.144l1.335-2.226a.5.5 0 0 0-.172-.686Z"/>
                  </svg>
                </div>
                <script>
                    function inputToken(){
                      // Menggunakan Fetch API untuk mengambil data dari server Flask
                      var stroom_token = document.getElementById('stroom_token').value;
                      const dataToSend = {
                          stroom_token: stroom_token,
                      };

                      var input = document.getElementById('stroom_token');
                      input.value = '';

                      fetch('http://localhost:5000/api/input_token', {
                          method: 'POST',
                          headers: {
                              'Content-Type': 'application/json',
                          },
                          body: JSON.stringify(dataToSend),
                      })

                      .then(response => response.json())
                      .then(data => {
                            console.log('Respons dari server:', data.status);
                      })
                      .catch(error => console.error('Error:', error));
                  }
                </script>  
              </div>
            </div>
          </div>
        </div>
      </div>
      <div data-firebase="hasil"></div>
      <script>
        var currentDate = new Date();
        var tanggal = currentDate.getDate().toString().padStart(2, '0') + "-" + (currentDate.getMonth() + 1).toString().padStart(2, '0') + "-" + currentDate.getFullYear();
        var timeStamp = currentDate.getHours().toString().padStart(2, '0') + ":" + currentDate.getMinutes().toString().padStart(2, '0') + ":" + currentDate.getSeconds().toString().padStart(2, '0');
        var temp_tanggal = tanggal;
        // console.log(tanggal)
        var hasil = document.querySelector('[data-firebase="hasil"]');

        // Mendapatkan referensi ke database
        var database = firebase.database();
        var dataRef = database.ref("/collection_data/electricity_data/"+tanggal);
        var dataRef_tms = database.ref("/collection_data/electricity_data/"+tanggal+"/timestamp");
        var htmlCheckDevice = `Device <a style="padding:0px 5px; background-color:#F54C48; border-radius:10px;"> Disconnected </a>`;

        dataRef.once("value", (snapshot) => {
            const data_temp = snapshot.val();
        });


        function interval_check(){
          currentDate = new Date();
          tanggal = currentDate.getDate().toString().padStart(2, '0') + "-" + (currentDate.getMonth() + 1).toString().padStart(2, '0') + "-" + currentDate.getFullYear();
          timeStamp = currentDate.getHours().toString().padStart(2, '0') + ":" + currentDate.getMinutes().toString().padStart(2, '0') + ":" + currentDate.getSeconds().toString().padStart(2, '0');
          
          if (temp_tanggal != tanggal){
            temp_tanggal = tanggal;
            database = firebase.database();
            dataRef = database.ref("/collection_data/electricity_data/"+tanggal);
            dataRef_tms = database.ref("/collection_data/electricity_data/"+tanggal+"/timestamp");
          }

          database.ref("/collection_data/electricity_data/"+tanggal+"/timestamp").once("value", (snapshot) => {
              var checkDevice = document.querySelector('[data-firebase="check-device"]');
              var current_date = snapshot.val();

              // Split the formatted date string into hours, minutes, and seconds
              const [hours_web, minutes_web, seconds_web] = timeStamp.split(':').map(Number);
              const [hours_dev, minutes_dev, seconds_dev] = current_date.split(':').map(Number);


              // Calculate the total seconds
              const totalSeconds_web = hours_web * 3600 + minutes_web * 60 + seconds_web;
              const totalSeconds_dev = hours_dev * 3600 + minutes_dev * 60 + seconds_dev;

              if (totalSeconds_web > totalSeconds_dev + 25){
                htmlCheckDevice = `Device <a style="padding:0px 5px; background-color:#F54C48; border-radius:10px;"> Disconnected </a>`;
              }else{
                htmlCheckDevice = `Device <a style="padding:0px 5px; background-color:#2DCEA3; border-radius:10px;"> Connected </a>`;
              }
              checkDevice.innerHTML = `${htmlCheckDevice}`;
          });
        }

        setInterval(interval_check, 1000);

        // Mendapatkan data satu kali (once)
        dataRef.on("value", (snapshot) => {
            const data = snapshot.val();

            // Cek apakah data ada atau tidak
            if (data) {
                // console.log("masuk if 1");
                if (data.biaya>=0){
                    // console.log("ini biaya awal:" + data.biaya);
                    firebase.database().ref("/collection_data/electricity_data/"+tanggal).update({
                        "biaya" : parseInt(hitung_biaya(data.daya, data.kwh))
                    })
                    
                    let htmlString = `
                        <div class="row">
                          <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
                            <div class="card">
                              <div class="card-body p-3">
                                <div class="row">
                                  <div class="col-8">
                                    <div class="numbers">
                                      <p class="text-sm mb-0 text-uppercase font-weight-bold">Today's Energy</p>
                                      <h5 class="font-weight-bolder">
                                        ${data.kwh} kWh
                                      </h5>
                                      <p class="mb-0">
                                        <span class="text-success text-sm font-weight-bolder">+55%</span>
                                        since yesterday
                                      </p>
                                    </div>
                                  </div>
                                  <div class="col-4 text-end">
                                    <div class="icon icon-shape bg-gradient-primary shadow-primary text-center rounded-circle">
                                      <i class="ni ni-money-coins text-lg opacity-10" aria-hidden="true"></i>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
                            <div class="card">
                              <div class="card-body p-3">
                                <div class="row">
                                  <div class="col-8">
                                    <div class="numbers">
                                      <p class="text-sm mb-0 text-uppercase font-weight-bold">Today's Power</p>
                                      <h5 class="font-weight-bolder">
                                        ${data.daya} Watt
                                      </h5>
                                      <p class="mb-0">
                                        <span class="text-success text-sm font-weight-bolder">+3%</span>
                                        since yesterday
                                      </p>
                                    </div>
                                  </div>
                                  <div class="col-4 text-end">
                                    <div class="icon icon-shape bg-gradient-danger shadow-danger text-center rounded-circle">
                                      <i class="ni ni-world text-lg opacity-10" aria-hidden="true"></i>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
                            <div class="card">
                              <div class="card-body p-3">
                                <div class="row">
                                  <div class="col-8">
                                    <div class="numbers">
                                      <p class="text-sm mb-0 text-uppercase font-weight-bold">Today's Cost</p>
                                      <h5 class="font-weight-bolder">
                                        Rp. ${data.biaya} ,-
                                      </h5>
                                      <p class="mb-0">
                                        <span class="text-danger text-sm font-weight-bolder">-2%</span>
                                        since yesterday
                                      </p>
                                    </div>
                                  </div>
                                  <div class="col-4 text-end">
                                    <div class="icon icon-shape bg-gradient-success shadow-success text-center rounded-circle">
                                      <i class="ni ni-cart text-lg opacity-10" aria-hidden="true"></i> 
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-xl-3 col-sm-6">
                            <div class="card">
                              <div class="card-body p-3">
                                <div class="row">
                                  <div class="col-8">
                                    <div class="numbers">
                                      <p class="text-sm mb-0 text-uppercase font-weight-bold">Time</p>
                                      <h5 class="font-weight-bolder">
                                        ${data.timestamp}
                                      </h5>
                                      <p class="mb-0">
                                        Let's Save
                                        <span class="text-success text-sm font-weight-bolder">Energy</span> 
                                      </p>
                                    </div>
                                  </div>
                                  <div class="col-4 text-end">
                                    <div class="icon icon-shape bg-gradient-warning shadow-warning text-center rounded-circle">
                                      <i class="ni ni-paper-diploma text-lg opacity-10" aria-hidden="true"></i>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        `;
                    hasil.innerHTML = `${htmlString}`;
                } else{
                    firebase.database().ref("/collection_data/electricity_data/"+tanggal).set({
                        "biaya" : 0,
                        "daya" : 0.0,
                        "kwh" : 0.0,
                        "timestamp" : "00:00:00"
                    })
                }
            } else {
                firebase.database().ref("/collection_data/electricity_data/"+tanggal).set({
                    "biaya" : 0,
                    "daya" : 0.0,
                    "kwh" : 0.0,
                    "timestamp" : "00:00:00"
                })
            }
        });

        function hitung_biaya(daya, kwh){
            if (daya <= 900){
                return kwh * 1352}
            else if (daya <= 1300 || daya <= 2200){
                return kwh * 1467}
            else if (daya <= 3500 || daya <= 5500){
                return kwh * 1699}
        }
      </script>
      <div>
        <div class="row mt-4" style="padding-top: 12px; padding-bottom: 15px;">
          <div class="col-lg-12 mb-lg-0 mb-4">
            <div class="card z-index-2 h-100">
              <div class="card-header pb-0 pt-3 bg-transparent">
                <h6 class="text-capitalize">Electricity Usage</h6>
                <p class="text-sm mb-0">
                  <i class="fa fa-arrow-up text-success"></i>
                  <span class="font-weight-bold">Electricity Graphics</span> in Todays
                </p>
              </div>
              <div class="card-body p-3">
                <div class="chart">
                  <canvas id="chart-line" class="chart-canvas" height="300"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <footer class="footer pt-3  ">
        <div class="container-fluid">
          <div class="row align-items-center justify-content-lg-between">
            <div class="col-lg-6 mb-lg-0 mb-4">
              <div class="copyright text-center text-sm text-muted text-lg-start">
                Â© <script>
                  document.write(new Date().getFullYear())
                </script>,
                Copyright by
                <a href="https://www.creative-tim.com" class="font-weight-bold" target="_blank">Creative Tim</a>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </main>
  <div class="fixed-plugin">
    <a class="fixed-plugin-button text-dark position-fixed px-3 py-2">
      <i class="fa fa-cog py-2"> </i>
    </a>
    <div class="card shadow-lg">
      <div class="card-header pb-0 pt-3 ">
        <div class="float-start">
          <h5 class="mt-3 mb-0">Argon Configurator</h5>
          <p>See our dashboard options.</p>
        </div>
        <div class="float-end mt-4">
          <button class="btn btn-link text-dark p-0 fixed-plugin-close-button">
            <i class="fa fa-close"></i>
          </button>
        </div>
        <!-- End Toggle Button -->
      </div>
      <hr class="horizontal dark my-1">
      <div class="card-body pt-sm-3 pt-0 overflow-auto">
        <!-- Sidebar Backgrounds -->
        <div>
          <h6 class="mb-0">Sidebar Colors</h6>
        </div>
        <a href="javascript:void(0)" class="switch-trigger background-color">
          <div class="badge-colors my-2 text-start">
            <span class="badge filter bg-gradient-primary active" data-color="primary" onclick="sidebarColor(this)"></span>
            <span class="badge filter bg-gradient-dark" data-color="dark" onclick="sidebarColor(this)"></span>
            <span class="badge filter bg-gradient-info" data-color="info" onclick="sidebarColor(this)"></span>
            <span class="badge filter bg-gradient-success" data-color="success" onclick="sidebarColor(this)"></span>
            <span class="badge filter bg-gradient-warning" data-color="warning" onclick="sidebarColor(this)"></span>
            <span class="badge filter bg-gradient-danger" data-color="danger" onclick="sidebarColor(this)"></span>
          </div>
        </a>
        <!-- Sidenav Type -->
        <div class="mt-3">
          <h6 class="mb-0">Sidenav Type</h6>
          <p class="text-sm">Choose between 2 different sidenav types.</p>
        </div>
        <div class="d-flex">
          <button class="btn bg-gradient-primary w-100 px-3 mb-2 active me-2" data-class="bg-white" onclick="sidebarType(this)">White</button>
          <button class="btn bg-gradient-primary w-100 px-3 mb-2" data-class="bg-default" onclick="sidebarType(this)">Dark</button>
        </div>
        <p class="text-sm d-xl-none d-block mt-2">You can change the sidenav type just on desktop view.</p>
        <!-- Navbar Fixed -->
        <div class="d-flex my-3">
          <h6 class="mb-0">Navbar Fixed</h6>
          <div class="form-check form-switch ps-0 ms-auto my-auto">
            <input class="form-check-input mt-1 ms-auto" type="checkbox" id="navbarFixed" onclick="navbarFixed(this)">
          </div>
        </div>
        <hr class="horizontal dark my-sm-4">
        <div class="mt-2 mb-5 d-flex">
          <h6 class="mb-0">Light / Dark</h6>
          <div class="form-check form-switch ps-0 ms-auto my-auto">
            <input class="form-check-input mt-1 ms-auto" type="checkbox" id="dark-version" onclick="darkMode(this)">
          </div>
        </div>
        <a class="btn bg-gradient-dark w-100" href="https://www.creative-tim.com/product/argon-dashboard">Free Download</a>
        <a class="btn btn-outline-dark w-100" href="https://www.creative-tim.com/learning-lab/bootstrap/license/argon-dashboard">View documentation</a>
        <div class="w-100 text-center">
          <a class="github-button" href="https://github.com/creativetimofficial/argon-dashboard" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star creativetimofficial/argon-dashboard on GitHub">Star</a>
          <h6 class="mt-3">Thank you for sharing!</h6>
          <a href="https://twitter.com/intent/tweet?text=Check%20Argon%20Dashboard%20made%20by%20%40CreativeTim%20%23webdesign%20%23dashboard%20%23bootstrap5&amp;url=https%3A%2F%2Fwww.creative-tim.com%2Fproduct%2Fargon-dashboard" class="btn btn-dark mb-0 me-2" target="_blank">
            <i class="fab fa-twitter me-1" aria-hidden="true"></i> Tweet
          </a>
          <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.creative-tim.com/product/argon-dashboard" class="btn btn-dark mb-0 me-2" target="_blank">
            <i class="fab fa-facebook-square me-1" aria-hidden="true"></i> Share
          </a>
        </div>
      </div>
    </div>
  </div>
  <!--   Core JS Files   -->
  <script src={{ url_for('static', filename="/assets/js/core/popper.min.js") }}></script>
  <script src={{ url_for('static', filename="/assets/js/core/bootstrap.min.js") }}></script>
  <script src={{ url_for('static', filename="/assets/js/plugins/perfect-scrollbar.min.js") }}></script>
  <script src={{ url_for('static', filename="/assets/js/plugins/smooth-scrollbar.min.js") }}></script>
  <script src={{ url_for('static', filename="/assets/js/plugins/chartjs.min.js") }}></script>
  <script>
        var ctx1 = document.getElementById("chart-line").getContext("2d");

        var gradientStroke1 = ctx1.createLinearGradient(0, 230, 0, 50);

        gradientStroke1.addColorStop(1, 'rgba(94, 114, 228, 0.2)');
        gradientStroke1.addColorStop(0.2, 'rgba(94, 114, 228, 0.0)');
        gradientStroke1.addColorStop(0, 'rgba(94, 114, 228, 0)');

        var chartData = {
            labels: ["Nan", "Nan"],
            datasets: [{
                label: "Electricity Usage",
                tension: 0.4,
                borderWidth: 0,
                pointRadius: 0,
                borderColor: "#5e72e4",
                backgroundColor: gradientStroke1,
                borderWidth: 3,
                fill: true,
                data: [0, 0],
                maxBarThickness: 6
            }],
        };

        var myChart = new Chart(ctx1, {
            type: "line",
            data: chartData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false,
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'index',
                },
                scales: {
                    y: {
                        grid: {
                            drawBorder: false,
                            display: true,
                            drawOnChartArea: true,
                            drawTicks: false,
                            borderDash: [5, 5]
                        },
                        ticks: {
                            display: true,
                            padding: 10,
                            color: '#fbfbfb',
                            font: {
                                size: 11,
                                family: "Open Sans",
                                style: 'normal',
                                lineHeight: 2
                            },
                        }
                    },
                    x: {
                        grid: {
                            drawBorder: false,
                            display: false,
                            drawOnChartArea: false,
                            drawTicks: false,
                            borderDash: [5, 5]
                        },
                        ticks: {
                            display: true,
                            color: '#ccc',
                            padding: 20,
                            font: {
                                size: 11,
                                family: "Open Sans",
                                style: 'normal',
                                lineHeight: 2
                            },
                        }
                    },
                },
            },
        });

        // Function to add new data
        function addData(energy, label) {
            var maxDataPoints = 30;
    
            if (chartData.labels.length >= maxDataPoints) {
                // Hapus data pertama jika jumlah data sudah mencapai batas
                chartData.labels.shift();
                chartData.datasets[0].data.shift();
            }

            // Gunakan parameter Energy untuk menambah data
            chartData.labels.push(label);
            chartData.datasets[0].data.push(energy);
            
            myChart.update(); // Update the chart to reflect the changes
        }

        var dataRef_chart = database.ref("/collection_data/electricity_data/"+tanggal+"/daya");

        dataRef_chart.on("value", (snapshot) => {
            addData(snapshot.val(), timeStamp);
        });

        // Simulate adding new data every 3 seconds (for demonstration purposes)
        // addData(75);

        // Simulasi menambahkan data baru setiap 3 detik (untuk tujuan demonstrasi)
        // setInterval(function() {
        //     // Gantilah nilai parameter dengan sesuatu yang sesuai dengan kebutuhan Anda
        //     var newEnergyValue = 500;
        //     addData(newEnergyValue);
        // }, 3000);
    </script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
  <script src={{ url_for('static', filename="/assets/js/argon-dashboard.min.js") }}></script>
</body>

</html>